<!doctype html>
<html lang="en">
  <head>
    <script>
      // БЛОК С ДАННЫМИ И ФОРМУЛАМИ
      // Донор-форму тоже вручную не скрывать - код это сделает за вас
      // Исходники: https://github.com/Drun555/tilda-bank-form
      //  _______                       __              ________                                
      // /       \                     /  |            /        |                               
      // $$$$$$$  |  ______   _______  $$ |   __       $$$$$$$$/______    ______   _____  ____  
      // $$ |__$$ | /      \ /       \ $$ |  /  |      $$ |__  /      \  /      \ /     \/    \ 
      // $$    $$<  $$$$$$  |$$$$$$$  |$$ |_/$$/       $$    |/$$$$$$  |/$$$$$$  |$$$$$$ $$$$  |
      // $$$$$$$  | /    $$ |$$ |  $$ |$$   $$<        $$$$$/ $$ |  $$ |$$ |  $$/ $$ | $$ | $$ |
      // $$ |__$$ |/$$$$$$$ |$$ |  $$ |$$$$$$  \       $$ |   $$ \__$$ |$$ |      $$ | $$ | $$ |
      // $$    $$/ $$    $$ |$$ |  $$ |$$ | $$  |      $$ |   $$    $$/ $$ |      $$ | $$ | $$ |
      // $$$$$$$/   $$$$$$$/ $$/   $$/ $$/   $$/       $$/     $$$$$$/  $$/       $$/  $$/  $$/ 
      
      // Инициализация
      window.bankForm = {}; window.bankForm.f = {};
      
      // ___НИЖЕ НАЧАЛЬНЫЕ ДАННЫЕ______________________________________________________________________________________
      
      // ID формы-донора, например #rec655808900
      // В форме должно быть три необязательных текстовых поля без масок с именами переменных Name, Tel и Date
      window.bankForm.donorFormID = '#rec655808900'
      
      // Начальная сумма недвижимости
      window.bankForm.costOfRealEstate = 5000000
      
      // Начальный первоначальный взнос в %
      window.bankForm.initialFee = 20
      
      // Начальный срок
      window.bankForm.mortgageYears = 10
      
      // Ставка. 0.05 = 5%
      window.bankForm.bankRate = 0.05
      
      // ___НИЖЕ ФОРМУЛЫ___________________________________________________________________________________
      
      // Получение суммы кредита.
      window.bankForm.f.getLoanAmount = (costOfRealEstate, initialFee, mortgageYears) => {
        return (costOfRealEstate * ((100 - initialFee) / 100)) * window.bankForm.bankRate / ( 1 - Math.pow(1+window.bankForm.bankRate, -mortgageYears) ) * mortgageYears
      }
  
      // Получение первоначальный взнос в AED.
      window.bankForm.f.getCalcInitialFee = (costOfRealEstate, initialFee) => {
        return costOfRealEstate / 100 * initialFee
      }
      
      // Высчитывание ежемесячного платёжа.
      window.bankForm.f.getMonthlyFee = (loanAmount, mortgageYears) => {
        return loanAmount / mortgageYears / 12
      }

      // Дальше - сгенерированный код от бандлера. Если хотите изменить сам код, то проходите на страницу исходников,
      // пересоберите и опубликуйте выхлоп

    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Форма</title>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
